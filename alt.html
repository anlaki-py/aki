<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>anlaki | Portfolio</title>

    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom CSS -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

      body {
        font-family: 'Inter', sans-serif;
        background-color: #050505; /* Very dark grey, almost black */
        margin: 0;
        overflow-x: hidden;
      }

      /* Animations */
      @keyframes blurIn {
        0% { opacity: 0; filter: blur(8px); transform: translateY(10px); }
        100% { opacity: 1; filter: blur(0); transform: translateY(0); }
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .animate-blur-in { opacity: 0; animation: blurIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
      .animate-fade-in { opacity: 0; animation: fadeIn 0.8s ease-out forwards; }
      .delay-150 { animation-delay: 150ms; }
      .delay-300 { animation-delay: 300ms; }
      
      /* Glass Panel */
      .glass-panel {
        background: rgba(20, 20, 20, 0.4);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // --- Fluid Background Component ---
      const BackgroundFluid = () => {
        const mountRef = useRef(null);

        useEffect(() => {
          const mount = mountRef.current;
          
          // 1. Scene Setup
          const scene = new THREE.Scene();
          
          // Orthographic camera ensures blobs stay the same size regardless of Z depth
          const camera = new THREE.OrthographicCamera(
            window.innerWidth / -2, window.innerWidth / 2,
            window.innerHeight / 2, window.innerHeight / -2,
            1, 1000
          );
          camera.position.z = 10;

          const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: false });
          renderer.setSize(window.innerWidth, window.innerHeight);
          mount.appendChild(renderer.domElement);

          // 2. Create Blobs
          const geometry = new THREE.CircleGeometry(200, 32); // Simple 2D circles
          const group = new THREE.Group();

          // Green Color Palette (Hex codes)
          const blobs = [
            { color: 0x22c55e, x: -300, y: 100, scale: 1.5, speed: 0.8 }, // Green 500 (Bright)
            { color: 0x15803d, x: 300, y: -100, scale: 1.2, speed: 1.2 }, // Green 700 (Darker)
            { color: 0x4ade80, x: -100, y: -200, scale: 1.8, speed: 0.6 }, // Green 400 (Neon-ish)
            { color: 0x14532d, x: 200, y: 200, scale: 1.4, speed: 0.9 }, // Green 900 (Deep Forest)
          ];

          const meshes = blobs.map(b => {
            const material = new THREE.MeshBasicMaterial({ color: b.color });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(b.x, b.y, 0);
            mesh.scale.setScalar(b.scale);
            mesh.userData = { 
              initialX: b.x, 
              initialY: b.y, 
              speed: b.speed,
              offset: Math.random() * 100 
            };
            group.add(mesh);
            return mesh;
          });

          scene.add(group);

          // 3. Inputs
          let mouseX = 0;
          let mouseY = 0;
          let gyroX = 0;
          let gyroY = 0;

          const onMouseMove = (e) => {
            mouseX = (e.clientX - window.innerWidth / 2);
            mouseY = (e.clientY - window.innerHeight / 2);
          };

          const onGyro = (e) => {
            if (e.gamma !== null) {
              gyroX = e.gamma * 10; 
              gyroY = (e.beta - 45) * 10;
            }
          };

          window.addEventListener('mousemove', onMouseMove);
          window.addEventListener('deviceorientation', onGyro);

          // 4. Animation
          const clock = new THREE.Clock();

          const animate = () => {
            const time = clock.getElapsedTime();

            // Animate individual blobs
            meshes.forEach(mesh => {
              const { initialX, initialY, speed, offset } = mesh.userData;
              
              // Organic wandering motion
              mesh.position.x = initialX + Math.sin(time * speed * 0.5 + offset) * 150;
              mesh.position.y = initialY + Math.cos(time * speed * 0.4 + offset) * 150;
              
              // Gentle pulsing
              const scalePulse = Math.sin(time * speed + offset) * 0.1 + 1;
              mesh.scale.setScalar(mesh.userData.speed * scalePulse);
            });

            // Global Parallax (Mouse + Gyro)
            const targetX = (mouseX + gyroX) * 0.2;
            const targetY = -(mouseY + gyroY) * 0.2; // Invert Y for natural feel

            group.position.x += (targetX - group.position.x) * 0.05;
            group.position.y += (targetY - group.position.y) * 0.05;

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
          };

          animate();

          // 5. Resize
          const handleResize = () => {
            const width = window.innerWidth;
            const height = window.innerHeight;
            renderer.setSize(width, height);
            camera.left = width / -2;
            camera.right = width / 2;
            camera.top = height / 2;
            camera.bottom = height / -2;
            camera.updateProjectionMatrix();
          };

          window.addEventListener('resize', handleResize);

          return () => {
            window.removeEventListener('mousemove', onMouseMove);
            window.removeEventListener('deviceorientation', onGyro);
            window.removeEventListener('resize', handleResize);
            mount.removeChild(renderer.domElement);
          };
        }, []);

        return (
          <div 
            ref={mountRef} 
            className="fixed top-0 left-0 w-full h-full -z-10"
            style={{ 
              filter: 'blur(100px)', // This creates the fluid gradient
              transform: 'scale(1.2)', // Scale up to avoid blurred edges
              opacity: 0.6
            }}
          />
        );
      };

      // --- Components ---
      const socialLinks = [
        { name: "github", href: "https://github.com/anlaki-py" },
        { name: "huggingface", href: "https://huggingface.co/anlaki" },
        { name: "instagram", href: "https://instagram.com/anlaki.dev" },
      ];

      const Footer = () => (
        <footer className="w-full max-w-lg p-8 md:p-12 relative z-20">
          <div className="h-px w-full bg-gradient-to-r from-transparent via-slate-700 to-transparent mb-4"></div>
          <div className="flex justify-center gap-6 text-xs font-medium opacity-60">
            {socialLinks.map((link) => (
              <a key={link.name} href={link.href} target="_blank" rel="noopener noreferrer" className="hover:text-green-400 hover:scale-110 transition-all duration-200 uppercase tracking-wider">
                {link.name}
              </a>
            ))}
          </div>
        </footer>
      );

      const projects = [
        { name: "rÅkaru", href: "https://rokaru.anlaki.dev" },
        { name: "mdshare", href: "https://mdshare.anlaki.dev/" },
      ];

      const Projects = () => (
        <main className="w-full glass-panel rounded-xl p-6 hover:border-green-500/30 transition-colors duration-500 relative z-20">
          <h3 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Projects</h3>
          <div className="flex flex-col gap-3 items-start">
            {projects.map((project) => (
              <a key={project.name} href={project.href} className="group flex items-center gap-2 text-sm text-slate-300 hover:text-white transition-all duration-200">
                <span className="w-1.5 h-1.5 rounded-full bg-slate-600 group-hover:bg-green-400 group-hover:shadow-[0_0_8px_rgba(74,222,128,0.8)] transition-all"></span>
                <span className="underline decoration-slate-700 underline-offset-4 decoration-1 group-hover:decoration-green-500/50">
                  {project.name}
                </span>
              </a>
            ))}
          </div>
        </main>
      );

      const App = () => {
        return (
          <div className="min-h-[100dvh] text-slate-200 font-sans flex flex-col items-center relative overflow-hidden">
            
            {/* 1. Fluid Background */}
            <BackgroundFluid />

            <div className="max-w-lg w-full p-8 md:p-12 flex-grow flex flex-col justify-center z-20">
              <header className="mb-10 animate-blur-in">
                <div className="inline-block relative">
                   <h1 className="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white via-green-200 to-slate-400 tracking-tight">
                    anlaki
                  </h1>
                </div>
                <p className="text-sm text-slate-400 mt-2 font-light">
                  tech nerd who <span className="text-green-400 font-normal">builds things</span>
                </p>
              </header>

              <div className="animate-blur-in delay-150">
                <Projects />
              </div>
            </div>

            <div className="w-full flex justify-center animate-fade-in delay-300 z-20">
              <Footer />
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>